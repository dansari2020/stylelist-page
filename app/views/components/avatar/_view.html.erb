<%= turbo_frame_tag "avatar", data: { turbo: true } do %>
  <div class="flex flex-1">
    <div class="w-full -mt-14 md:-mt-20">
      <div class="relative w-20 h-20 mx-auto rounded-full md:h-28 md:w-28 avatar">
        <%= form_for(user, url: profile_users_path, html: { method: :put, id: dom_id(user, "avatar")}) do |f| %>
          <%= f.label :avatar, class: "cursor-pointer" do %>
            <div class="relative">
              <% if user.avatar.attached? %>
                <%= image_tag user.avatar_thumb, class: "md rounded-full h-20 w-20 md:h-28 md:w-28 relative" %>
              <% else %>
                <%= image_tag "icons/avatar.svg", class: "md rounded-full h-20 w-20 md:h-28 md:w-28 relative" %>
              <% end %>
              <div class="absolute w-6 h-6 right-1 inset-y-3/4">
                <%= image_tag "icons/attached_background.png", class: "w-6 h-6 mx-auto" %>
              </div>
              <input type="hidden" name="frame" value="avatar">
              <input type="hidden" name="component" value="avatar">
              <% submit2_id = dom_id(user, "submit_avatar") %>
              <%= f.file_field :avatar, class: "hidden", "x-on:change": "document.getElementById('#{submit2_id}').click()" %>
              <%= f.submit "", id: submit2_id, class: "hidden" %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
