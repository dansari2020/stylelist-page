<%#
# Navigation

This partial is used to display the navigation in Administrate.
By default, the navigation contains navigation links
for all resources in the admin dashboard,
as defined by the routes in the `admin/` namespace
%>

<nav id="navigation" class="relative flex flex-col flex-wrap dark bg-gray-900 print:hidden border-r border-gray-300 p-6 flex-none w-64 md:z-30 md:h-screen md:shadow-xl animated faster md:slideOutLeft md:sticky md:top-0 min-h-screen h-full" role="navigation">
  <div class="flex flex-col">
    <div class="flex items-center justify-center">
      <%= image_tag "mini-logo.svg", alt: "StylistPage Logo", class: "h-8 w-auto" %>
    </div>
    <div class="flex flex-col items-center w-full p-4">
      <div class="relative w-24 h-24">
        <% if current_user.avatar.attached? %>
          <%= image_tag current_user.avatar_thumb, class: "w-full h-full rounded-full" %>
        <% else %>
          <%= image_tag "icons/avatar.svg", class: "w-full h-full rounded-full" %>
        <% end %>
      </div>
      <div class="flex flex-col items-center justify-center w-full mt-6">
        <div class="w-full whitespace-nowrap overflow-ellipsis overflow-hidden text-center leading-normal font-medium text-white"><%= current_user.full_name %></div>
        <div class="w-full mt-0.5 whitespace-nowrap overflow-ellipsis overflow-hidden text-center text-md leading-normal font-medium text-secondary" style="color: rgb(148, 163, 184)"><%= current_user.email %></div>
      </div>
    </div>
    <div class="mt-8 space-x-4 space-y-2 flex flex-col">
      <p class="p-2.5"><span class="uppercase font-medium" style="color: rgb(129, 140, 248)"> Dashboards </span></p>

      <% Administrate::Namespace.new(namespace).resources_with_index_route.each do |resource| %>
        <% if valid_action?(:index, resource) && show_action?(:index, model_from_resource(resource)) %>
          <%= link_to(
            resource_index_route(resource),
            class: "p-2.5 flex flex-row text-gray-400 hover:text-white font-normal text-sm navigation__link--#{nav_link_state(resource)}"
          ) do %>
              <% case resource %>
              <% when "users" %>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
              <% when "portfolios" %>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
              <% else %>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                </svg>
              <% end %>
            <span class="pl-2"><%= display_resource_name(resource) %></span>
          <% end %>
        <% end %>
      <% end %>
      <%= link_to('Sign Out', destroy_user_session_path, method: :delete, class: "py-2.5 text-gray-400 hover:text-red-500 font-normal text-sm") if defined?(destroy_user_session_path) %>
    </div>
  </div>
</nav>
