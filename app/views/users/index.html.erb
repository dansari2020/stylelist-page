<div class="flex flex-col md:flex-row" x-data="{ tab : '<%= @tab %>', submenu : '<%= @submenu %>' }">
  <div class="flex relative flex-col px-4 md:overflow-y-scroll md:w-1/4 lg:w-1/5 h-screen-headless h-screen-mobile">
    <div class="flex-1">
      <h1 class="py-4 mb-6 text-xl font-bold leading-tight md:text-2xl">Settings</h1>
      <ul>
        <li class="py-4 px-4 rounded-md" :class="{'bg-gray-200' : tab === 'profile'}">
          <a href="#" class="flex justify-between" @click.prevent="tab = 'profile'; submenu = ''">
            <div class="space-x-2">
              <%= image_tag "icons/profile.svg", class: "h-6 inline-block" %>
              <span class="inline-block font-normal text-md">Edit Profile</span>
            </div>
            <%= image_tag "icons/arrow-right.svg", class: "h-6", "x-show": "tab === 'profile'" %>
          </a>
        </li>
        <li class="py-4 px-4 rounded-md" :class="{'bg-gray-200' : tab === 'manage_account'}">
          <a href="#" class="flex justify-between" @click.prevent="tab = 'manage_account'; submenu = ''">
            <div class="space-x-2">
              <%= image_tag "icons/manage_account.svg", class: "h-6 inline-block" %>
              <span class="inline-block font-normal text-md">Manage Account</span>
            </div>
            <%= image_tag "icons/arrow-right.svg", class: "h-6", "x-show": "tab === 'manage_account'" %>
          </a>
        </li>
      </ul>
    </div>
    <button class="flex justify-center items-center py-2 px-4 mb-10 w-full text-black whitespace-nowrap bg-transparent rounded-md hover:bg-yellow-500 hover:shadow-lg bg-yellow-light">
      Got Feedback
    </button>
  </div>
  <div class="px-2 pt-12 border-l md:overflow-y-scroll md:w-1/4 lg:w-1/5 h-screen-headless h-screen-mobile">
    <ul class="mt-10" id="profil_submenu" x-show="tab === 'profile'">
      <li class="py-4 px-4 rounded-md" :class="{'bg-blue-100' : submenu === 'name'}">
        <a href="#" class="flex justify-between items-center" @click.prevent="submenu = 'name'">
          <div>
            <h3 class="font-normal text-md">Name</h3>
            <p class="text-sm text-gray-400"><%= @user.full_name %></p>
          </div>
          <%= image_tag "icons/arrow-right.svg", class: "h-6", "x-show": "submenu === 'name'" %>
        </a>
      </li>
      <li class="py-4 px-4 rounded" :class="{'bg-blue-100' : submenu === 'job'}">
        <a href="#" class="flex justify-between items-center" @click.prevent="submenu = 'job'">
          <div>
            <h3 class="font-normal text-md">Job Title</h3>
            <p class="text-sm text-gray-400"><%= @user.job %></p>
          </div>
          <%= image_tag "icons/arrow-right.svg", class: "h-6", "x-show": "submenu === 'job'" %>
        </a>
      </li>
    </ul>
    <ul class="mt-10" id="manage_account_submenu" x-show="tab === 'manage_account'">
      <li class="py-4 px-4 rounded-md" :class="{'bg-blue-100' : submenu === 'update_email'}">
        <a href="#" class="flex justify-between items-center" @click.prevent="submenu = 'update_email'">
          <div>
            <h3 class="font-normal text-md">Update Email</h3>
            <p class="text-sm text-gray-400"><%= @user.email %></p>
          </div>
          <%= image_tag "icons/arrow-right.svg", class: "h-6", "x-show": "submenu === 'update_email'" %>
        </a>
      </li>
      <li class="py-4 px-4 rounded" :class="{'bg-blue-100' : submenu === 'change_password'}">
        <a href="#" class="flex justify-between items-center" @click.prevent="submenu = 'change_password'">
          <div>
            <h3 class="font-normal text-md">Change Password</h3>
            <p class="text-sm text-gray-400">Create a new password</p>
          </div>
          <%= image_tag "icons/arrow-right.svg", class: "h-6", "x-show": "submenu === 'change_password'" %>
        </a>
      </li>
      <li class="py-4 px-4 rounded" :class="{'bg-blue-100' : submenu === 'deactivate'}">
        <a href="#" class="flex justify-between items-center" @click.prevent="submenu = 'deactivate'">
          <div>
            <h3 class="font-normal text-md">Deactivate Account</h3>
            <p class="text-sm text-gray-400">Hide your portfolio from the web</p>
          </div>
          <%= image_tag "icons/arrow-right.svg", class: "h-6", "x-show": "submenu === 'deactivate'" %>
        </a>
      </li>
    </ul>
  </div>
  <div class="px-2 pt-12 border-l md:overflow-y-scroll md:w-2/4 lg:w-3/5 h-screen-headless h-screen-mobile">
    <div class="mb-40 md:max-w-md" x-show="submenu !== ''">
      <%= form_for(@user, url: profile_users_path, html: { method: :put }) do |f| %>
        <input type="hidden" name="tab" value="<%= @tab %>" x-value="tab" x-text="tab" x-model="tab">
        <input type="hidden" name="submenu" value="<%= @submenu %>" x-value="submenu" x-text="submenu" x-model="submenu">
        <%= render "devise/shared/error_messages", resource: @user %>
        <%= render "shared/notices" %>
        <div id="change_name" x-show="submenu === 'name'">
          <%= render partial: "users/change_name", locals: {f: f} %>
        </div>
        <div id="change_job" x-show="submenu === 'job'">
          <%= render partial: "users/change_job", locals: {f: f} %>
        </div>
        <div id="update_email" x-show="submenu === 'update_email'">
          <%= render partial: "users/update_email", locals: {f: f} %>
        </div>
        <div id="change_password" x-show="submenu === 'change_password'">
          <%= render partial: "users/change_password", locals: {f: f} %>
        </div>
        <div id="deactive_account" x-show="submenu === 'deactivate'">
          <%= render partial: "users/deactive_account", locals: {f: f} %>
        </div>
        <div class="mt-4 w-full text-right actions">
          <%= link_to "Cancel", "#", class: "text-black text-white text-blue-500 hover:bg-blue-500 hover:text-white lg:px-4 py-2 rounded-md text-sm font-medium" %>
          <%= f.submit "Save", class: "text-black text-white bg-blue-500 hover:bg-blue-700 px-4 py-2 rounded-md text-sm font-medium" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
